#!/bin/bash
# Rotates files/folders with ".N" indices forward
# Will delete last item and rotate forward
set -e
EXPECTED_ARGS=2
E_BADARGS=65
if [ $# -lt $EXPECTED_ARGS ]
then
  echo "Usage: `basename $0` [max-num] [file/dir name]"
  exit $E_BADARGS
fi

m=$1
base=$2

if [ -e "$base.$m" ] ; then
    rm -rf "$base.$m"
fi

for ((i=$(($m - 1));i>=0;i--)); do
    j=$(($i + 1))
    if [ -e "$base.$i" ] ; then
	mv "$base.$i" "$base.$j"
    fi
done
