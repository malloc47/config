#!/bin/bash
# Rotates files/folders with ".N" indices backward
# Will delete last item and rotate backward
set -e
EXPECTED_ARGS=2
E_BADARGS=65
if [ $# -lt $EXPECTED_ARGS ]
then
  echo "Usage: `basename $0` [max-num] [file/dir name]"
  exit $E_BADARGS
fi

m=$1
base=$2

if [ -e "$base.0" ] ; then
    rm -rf "$base.0"
fi

for ((i=1;i<$(($m + 1));i++)); do
    j=$(($i - 1))
    if [ -e "$base.$i" ] ; then
        mv "$base.$i" "$base.$j"
    fi
done
